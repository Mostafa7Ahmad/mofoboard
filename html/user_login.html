<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>تسجيل الدخول - منصة التعلم</title>
    <link rel="stylesheet" href="css/main.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />

</head>
<body class="bg-background min-h-screen">
    <!-- Background Pattern -->
    <div class="fixed inset-0 bg-gradient-to-br from-primary-50 to-primary-100 opacity-50"></div>
    
    <!-- Main Container -->
    <div class="relative min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8">
        <div class="max-w-md w-full space-y-8">
            <!-- Logo and Header -->
            <div class="text-center">
                <div class="mx-auto flex justify-center">
                    <div class="bg-primary rounded-full p-3 shadow-card-md">
                        <svg class="h-12 w-12 text-white" viewBox="0 0 32 32" fill="currentColor">
                            <path d="M16 2L3 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-13-5z"/>
                            <path d="M16 6L7 9.5v7.5c0 3.33 2.31 6.45 5.4 7.2 3.09-.75 5.4-3.87 5.4-7.2V9.5L16 6z" fill="white"/>
                        </svg>
                    </div>
                </div>
                <h2 class="mt-6 text-center text-3xl font-heading font-bold text-text-primary">
                    مرحباً بعودتك
                </h2>
                <p class="mt-2 text-center text-sm text-text-secondary">
                    قم بتسجيل الدخول للوصول إلى حسابك
                </p>
            </div>

            <!-- Login Form -->
            <div class="bg-surface rounded-xl shadow-card-lg border border-border p-8">
                <form class="space-y-6" id="loginForm">
                    <!-- Email/Username Field -->
                    <div>
                        <label for="email" class="block text-sm font-medium text-text-primary mb-2">
                            البريد الإلكتروني أو اسم المستخدم
                        </label>
                        <div class="relative">
                            <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                <i class="fas fa-user text-text-secondary"></i>
                            </div>
                            <input id="email" name="email" type="email" autocomplete="email" required class="block w-full pr-10 pl-3 py-3 border border-border rounded-lg bg-surface text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-normal" placeholder="أدخل بريدك الإلكتروني أو اسم المستخدم" />
                        </div>
                    </div>

                    <!-- Password Field -->
                    <div>
                        <label for="password" class="block text-sm font-medium text-text-primary mb-2">
                            كلمة المرور
                        </label>
                        <div class="relative">
                            <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                <i class="fas fa-lock text-text-secondary"></i>
                            </div>
                            <input id="password" name="password" type="password" autocomplete="current-password" required class="block w-full pr-10 pl-10 py-3 border border-border rounded-lg bg-surface text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-normal" placeholder="أدخل كلمة المرور" />
                            <button type="button" id="togglePassword" class="absolute inset-y-0 left-0 pl-3 flex items-center hover:text-primary transition-micro">
                                <i class="fas fa-eye text-text-secondary" id="eyeIcon"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Remember Me & Forgot Password -->
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <input id="remember-me" name="remember-me" type="checkbox" class="h-4 w-4 text-primary focus:ring-primary border-border rounded" />
                            <label for="remember-me" class="mr-2 block text-sm text-text-secondary">
                                تذكرني
                            </label>
                        </div>

                        <div class="text-sm">
                            <a href="#" class="font-medium text-primary hover:text-primary-700 transition-micro">
                                نسيت كلمة المرور؟
                            </a>
                        </div>
                    </div>

                    <!-- Login Button -->
                    <div>
                        <button type="submit" class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-primary hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-normal" id="loginBtn">
                            <span class="absolute left-0 inset-y-0 flex items-center pl-3">
                                <i class="fas fa-sign-in-alt group-hover:text-primary-300 transition-micro" id="loginIcon"></i>
                            </span>
                            <span id="loginBtnText">تسجيل الدخول</span>
                        </button>
                    </div>

                    <!-- Two-Factor Authentication Section (Hidden by default) -->
                    <div id="twoFactorSection" class="hidden space-y-4">
                        <div class="text-center">
                            <p class="text-sm text-text-secondary">
                                تم إرسال رمز التحقق إلى هاتفك المحمول
                            </p>
                        </div>
                        <div>
                            <label for="verificationCode" class="block text-sm font-medium text-text-primary mb-2">
                                رمز التحقق
                            </label>
                            <input id="verificationCode" name="verificationCode" type="text" maxlength="6" class="block w-full py-3 px-4 text-center border border-border rounded-lg bg-surface text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-normal font-mono text-lg tracking-widest" placeholder="000000" />
                        </div>
                        <button type="button" class="w-full py-3 px-4 text-sm font-medium rounded-lg text-primary bg-primary-50 hover:bg-primary-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-normal">
                            إعادة إرسال الرمز
                        </button>
                    </div>

                    <!-- Error Message -->
                    <div id="errorMessage" class="hidden bg-error-50 border border-error-200 text-error-800 px-4 py-3 rounded-lg">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <i class="fas fa-exclamation-circle text-error"></i>
                            </div>
                            <div class="mr-3">
                                <p class="text-sm" id="errorText">حدث خطأ أثناء تسجيل الدخول</p>
                            </div>
                        </div>
                    </div>

                    <!-- Success Message -->
                    <div id="successMessage" class="hidden bg-success-50 border border-success-200 text-success-800 px-4 py-3 rounded-lg">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <i class="fas fa-check-circle text-success"></i>
                            </div>
                            <div class="mr-3">
                                <p class="text-sm">تم تسجيل الدخول بنجاح، جاري التوجيه...</p>
                            </div>
                        </div>
                    </div>
                </form>

                <!-- Social Login Options -->
                <div class="mt-6">
                    <div class="relative">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-border"></div>
                        </div>
                        <div class="relative flex justify-center text-sm">
                            <span class="px-2 bg-surface text-text-secondary">أو سجل الدخول باستخدام</span>
                        </div>
                    </div>

                    <div class="mt-6 grid grid-cols-3 gap-3">
                        <button type="button" class="w-full inline-flex justify-center py-2 px-4 border border-border rounded-lg bg-surface text-sm font-medium text-text-secondary hover:bg-gray-50 transition-micro">
                            <i class="fab fa-google text-lg text-red-500"></i>
                        </button>

                        <button type="button" class="w-full inline-flex justify-center py-2 px-4 border border-border rounded-lg bg-surface text-sm font-medium text-text-secondary hover:bg-gray-50 transition-micro">
                            <i class="fab fa-facebook-f text-lg text-blue-600"></i>
                        </button>

                        <button type="button" class="w-full inline-flex justify-center py-2 px-4 border border-border rounded-lg bg-surface text-sm font-medium text-text-secondary hover:bg-gray-50 transition-micro">
                            <i class="fab fa-apple text-lg text-gray-800"></i>
                        </button>
                    </div>
                </div>

                <!-- Registration Link -->
                <div class="mt-6 text-center">
                    <p class="text-sm text-text-secondary">
                        ليس لديك حساب؟
                        <a href="user_registration.html" class="font-medium text-primary hover:text-primary-700 transition-micro">
                            إنشاء حساب جديد
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-surface rounded-lg p-6 shadow-card-lg">
            <div class="flex items-center">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary ml-3"></div>
                <span class="text-text-primary">جاري تسجيل الدخول...</span>
            </div>
        </div>
    </div>

    <script>
        // Toggle password visibility
        document.getElementById('togglePassword').addEventListener('click', function() {
            const password = document.getElementById('password');
            const eyeIcon = document.getElementById('eyeIcon');
            
            if (password.type === 'password') {
                password.type = 'text';
                eyeIcon.classList.remove('fa-eye');
                eyeIcon.classList.add('fa-eye-slash');
            } else {
                password.type = 'password';
                eyeIcon.classList.remove('fa-eye-slash');
                eyeIcon.classList.add('fa-eye');
            }
        });

        // Form submission
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const loginBtn = document.getElementById('loginBtn');
            const loginBtnText = document.getElementById('loginBtnText');
            const loginIcon = document.getElementById('loginIcon');
            const errorMessage = document.getElementById('errorMessage');
            const successMessage = document.getElementById('successMessage');
            const loadingOverlay = document.getElementById('loadingOverlay');
            
            // Hide previous messages
            errorMessage.classList.add('hidden');
            successMessage.classList.add('hidden');
            
            // Show loading state
            loadingOverlay.classList.remove('hidden');
            loginBtn.disabled = true;
            loginBtnText.textContent = 'جاري تسجيل الدخول...';
            loginIcon.classList.remove('fa-sign-in-alt');
            loginIcon.classList.add('fa-spinner', 'fa-spin');
            
            // Simulate login process
            setTimeout(() => {
                // Simulate random success/error for demo
                const isSuccess = Math.random() > 0.3;
                
                loadingOverlay.classList.add('hidden');
                loginBtn.disabled = false;
                loginBtnText.textContent = 'تسجيل الدخول';
                loginIcon.classList.remove('fa-spinner', 'fa-spin');
                loginIcon.classList.add('fa-sign-in-alt');
                
                if (isSuccess) {
                    successMessage.classList.remove('hidden');
                    // Redirect to dashboard after success
                    setTimeout(() => {
                        window.location.href = 'student_dashboard.html';
                    }, 2000);
                } else {
                    errorMessage.classList.remove('hidden');
                    document.getElementById('errorText').textContent = 'البريد الإلكتروني أو كلمة المرور غير صحيحة';
                }
            }, 2000);
        });

        // Social login handlers
        document.querySelectorAll('button[type="button"]').forEach(button => {
            if (button.querySelector('.fab')) {
                button.addEventListener('click', function() {
                    const icon = this.querySelector('.fab');
                    let provider = 'unknown';
                    
                    if (icon.classList.contains('fa-google')) {
                        provider = 'Google';
                    } else if (icon.classList.contains('fa-facebook-f')) {
                        provider = 'Facebook';
                    } else if (icon.classList.contains('fa-apple')) {
                        provider = 'Apple';
                    }
                    
                    // Simulate social login
                    const loadingOverlay = document.getElementById('loadingOverlay');
                    loadingOverlay.querySelector('span').textContent = `جاري تسجيل الدخول باستخدام ${provider}...`;
                    loadingOverlay.classList.remove('hidden');
                    
                    setTimeout(() => {
                        loadingOverlay.classList.add('hidden');
                        // Redirect on success
                        window.location.href = 'student_dashboard.html';
                    }, 2000);
                });
            }
        });

        // Auto-format verification code
        document.getElementById('verificationCode').addEventListener('input', function(e) {
            // Only allow numbers
            this.value = this.value.replace(/[^0-9]/g, '');
            
            // Auto-submit when 6 digits are entered
            if (this.value.length === 6) {
                // Simulate verification
                const loadingOverlay = document.getElementById('loadingOverlay');
                loadingOverlay.querySelector('span').textContent = 'جاري التحقق من الرمز...';
                loadingOverlay.classList.remove('hidden');
                
                setTimeout(() => {
                    loadingOverlay.classList.add('hidden');
                    document.getElementById('successMessage').classList.remove('hidden');
                    
                    setTimeout(() => {
                        window.location.href = 'student_dashboard.html';
                    }, 1500);
                }, 2000);
            }
        });
    </script>

</body>
</html>